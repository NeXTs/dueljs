<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Duel page</title>
    <script type="text/javascript" src="lib/duel.js"></script>
</head>
<body>
<button onclick="channel.broadcast('demo_trigger', 'hello world')">
    channel.broadcast('demo_trigger', 'hello world')
</button>
<script type="text/javascript">
    var channel = duel.channel('test');
    document.title = 'Master ' + duel.getWindowID();

    channel.on('demo_trigger', function (message) {
        console.info((new Date).getTime(), message)
    });

    setInterval(function () {
        document.title = (window.isMaster() ? 'Master ' : 'Slave ') + duel.getWindowID();
    }, 100);
</script>
</body>
</html>